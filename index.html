<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline';">
  <meta name="description" content="A simple typing speed test application">
  <title>Typing Speed Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      padding: 20px;
      background: #f5f5f5;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }
    #test-text {
      background: #fff;
      padding: 15px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      font-size: 16px;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    #input-area {
      width: 100%;
      height: 100px;
      font-size: 16px;
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 4px;
      resize: vertical;
      box-sizing: border-box;
    }
    #timer, #result {
      margin-top: 10px;
      font-weight: bold;
      color: #333;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #45a049;
    }
    .container {
      padding: 20px;
    }
  </style>
</head>
<body>
<div class="container">
  <h1>Typing Speed Test (1 Minute)</h1>
  <div id="test-text">
    Data entry requires accuracy and speed. The candidate must be able to type quickly and pay attention to detail. Mistakes should be minimized while maintaining a steady typing rhythm. This test will help determine typing proficiency and readiness for data entry work. Practice regularly to improve both speed and accuracy over time.
  </div>

  <textarea id="input-area" placeholder="Start typing here when you're ready..." aria-label="Typing input area"></textarea>
  <div id="timer" role="timer">Time: 60s</div>
  <button onclick="startTest()" id="startButton">Start Test</button>
  <div id="result" role="status" aria-live="polite"></div>
</div>

<script>
  let timer;
  let timeLeft = 60;
  let isTestRunning = false;

  function startTest() {
    if (isTestRunning) return;
    
    const inputArea = document.getElementById('input-area');
    const resultDiv = document.getElementById('result');
    const startButton = document.getElementById('startButton');
    
    isTestRunning = true;
    inputArea.disabled = false;
    inputArea.value = '';
    inputArea.focus();
    timeLeft = 60;
    document.getElementById('timer').textContent = "Time: 60s";
    resultDiv.textContent = '';
    startButton.disabled = true;

    timer = setInterval(() => {
      timeLeft--;
      document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
      if (timeLeft <= 0) {
        clearInterval(timer);
        endTest();
      }
    }, 1000);
  }

  function endTest() {
    const inputArea = document.getElementById('input-area');
    const startButton = document.getElementById('startButton');
    
    clearInterval(timer);
    inputArea.disabled = true;
    startButton.disabled = false;
    isTestRunning = false;
    showResults();
  }

  function showResults() {
    const input = document.getElementById('input-area').value;
    const charCount = input.length;
    const wordCount = input.trim().split(/\s+/).filter(word => word.length > 0).length;
    const wpm = Math.round(wordCount);

    let result = `You typed ${charCount} characters and ${wordCount} words (${wpm} WPM).\n`;
    if (charCount >= 133) {
      result += "✅ You meet the 8000 key depressions/hour requirement!";
    } else {
      result += "❌ You need more practice to meet the required speed.";
    }

    document.getElementById('result').textContent = result;
  }

  // Cleanup on page unload
  window.addEventListener('unload', () => {
    if (timer) {
      clearInterval(timer);
    }
  });
</script>
</body>
</html>
